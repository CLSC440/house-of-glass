<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>House Of Glass | Gallery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Almarai:wght@300;400;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brandBlue: '#0A3654',
                        brandGold: '#C19B4E',
                    },
                    fontFamily: {
                        arabic: ['Almarai', 'Cairo', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        .modal { transition: opacity 0.25s ease; }
        body.modal-active { overflow: hidden; }
        .hide-scroll::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-gray-50 font-sans">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50 border-b-2 border-brandGold">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex justify-between items-center">
            <div class="flex items-center">
                <!-- Hamburger Menu Button -->
                <button onclick="toggleSidebar()" class="mr-4 p-2 text-brandBlue hover:bg-gray-100 rounded-lg transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
                <a href="index.html" class="flex items-center group">
                    <img src="logo.png" alt="Logo" class="h-16 w-auto transition-transform group-hover:scale-105">
                    <span class="ml-3 text-xl font-bold text-brandBlue hidden sm:block">House Of Glass</span>
                </a>
            </div>
            <nav class="hidden md:flex space-x-8">
                <a href="index.html" class="text-brandBlue border-b-2 border-brandGold px-1 py-2 text-sm font-bold">Home</a>
                <a href="login.html" class="text-brandGold hover:text-brandBlue px-1 py-2 text-sm font-bold transition-colors">Admin Login</a>
            </nav>
        </div>
    </header>

    <!-- Sidebar / Drawer -->
    <div id="sidebarOverlay" class="fixed inset-0 bg-black/50 z-[60] opacity-0 pointer-events-none transition-opacity duration-300" onclick="toggleSidebar()"></div>
    <div id="sidebar" class="fixed top-0 left-0 w-80 h-full bg-white z-[70] -translate-x-full transition-transform duration-300 shadow-2xl flex flex-col">
        <div class="p-6 border-b flex justify-between items-center">
            <h2 class="text-2xl font-bold text-brandBlue italic">Categories</h2>
            <button onclick="toggleSidebar()" class="text-gray-400 hover:text-brandBlue text-2xl font-bold">✕</button>
        </div>
        <div id="categoryList" class="flex-grow overflow-y-auto py-4">
            <!-- Categories will be injected here -->
        </div>
        <div class="p-6 border-t bg-gray-50">
            <a href="login.html" class="block text-center bg-brandBlue text-white py-3 rounded-xl font-bold border border-brandGold hover:bg-opacity-90">Admin Dashboard</a>
        </div>
    </div>

    <!-- Hero -->
    <section class="bg-brandBlue text-white py-24 text-center relative overflow-hidden">
        <!-- Subtle backround effect -->
        <div class="absolute inset-0 opacity-20 pointer-events-none">
            <div class="absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_50%_50%,_rgba(193,155,78,0.15),transparent_70%)]"></div>
        </div>
        
        <div class="relative z-10 px-4">
            <h2 class="text-6xl md:text-7xl font-black mb-4 text-brandGold tracking-tighter uppercase drop-shadow-sm">House Of Glass</h2>
            
            <div class="flex flex-col items-center justify-center mb-10">
                <p class="text-[10px] md:text-xs tracking-[0.8em] uppercase opacity-40 font-bold mb-8 transition-all hover:opacity-60 cursor-default">Showroom for Home Glassware</p>
                
                <div class="flex items-center justify-center w-full max-w-2xl mx-auto group">
                    <div class="flex-grow h-[1px] md:h-[2px] bg-gradient-to-l from-brandGold via-brandGold/40 to-transparent transition-all duration-1000 group-hover:from-white"></div>
                    <p class="text-5xl md:text-7xl font-black text-white font-arabic px-6 md:px-12 whitespace-nowrap leading-none transition-transform duration-500 hover:scale-105" dir="rtl" style="text-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                        ال عاشور عدس
                    </p>
                    <div class="flex-grow h-[1px] md:h-[2px] bg-gradient-to-r from-brandGold via-brandGold/40 to-transparent transition-all duration-1000 group-hover:from-white"></div>
                </div>
            </div>
            
            <p class="text-xl md:text-2xl opacity-60 max-w-2xl mx-auto font-light tracking-widest italic font-serif">"Excellence in every reflection."</p>
        </div>
    </section>

    <!-- Gallery Grid -->
    <main class="max-w-7xl mx-auto px-4 py-16 min-h-[60vh]">
        <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"></div>
    </main>

    <footer class="bg-white border-t border-gray-100 py-20">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <div class="mb-12 flex flex-col items-center">
                <img src="logo.png" alt="Logo" class="h-14 opacity-30 grayscale hover:grayscale-0 transition-all cursor-pointer mb-8" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
                <p class="text-[10px] text-gray-400 tracking-[0.5em] uppercase mb-6 font-bold">Powered by</p>
                
                <div class="flex items-center justify-center space-x-8 mb-4">
                    <div class="h-px w-12 bg-gradient-to-l from-brandGold/40 to-transparent"></div>
                    <p class="text-4xl font-black text-brandBlue font-arabic tracking-tight" dir="rtl">ال عاشور عدس</p>
                    <div class="h-px w-12 bg-gradient-to-r from-brandGold/40 to-transparent"></div>
                </div>
                
                <p class="text-brandBlue text-xs font-black tracking-[0.3em] uppercase opacity-70">Al Ashour Ades Showroom</p>
            </div>
            
            <div class="flex justify-center space-x-4 mb-8">
                <span class="w-1 h-1 rounded-full bg-brandGold/40"></span>
                <span class="w-1 h-1 rounded-full bg-brandGold/40"></span>
                <span class="w-1 h-1 rounded-full bg-brandGold/40"></span>
            </div>
            
            <p class="text-gray-300 text-[9px] tracking-[1em] font-medium uppercase">PREMIUM HOME GLASSWARE SHOWROOM</p>
        </div>
    </footer>

    <!-- PRODUCT DETAIL MODAL -->
    <div id="detailModal" class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-[100]">
        <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-80" onclick="closeDetails()"></div>
        <div class="modal-container bg-white w-11/12 md:max-w-5xl mx-auto rounded-2xl shadow-2xl z-50 overflow-hidden flex flex-col md:flex-row max-h-[90vh]">
            
            <!-- Image Section -->
            <div class="w-full md:w-2/3 bg-gray-100 flex flex-col overflow-hidden">
                <div class="flex-grow flex items-center justify-center p-4">
                    <img id="mainDetailImg" src="" class="max-w-full max-h-[50vh] md:max-h-[70vh] object-contain rounded-lg">
                </div>
                <div id="thumbnailBar" class="h-24 bg-white border-t flex space-x-2 p-2 overflow-x-auto hide-scroll justify-center">
                    <!-- Thumbnails will go here -->
                </div>
            </div>

            <!-- Content Section -->
            <div class="w-full md:w-1/3 p-8 flex flex-col justify-between">
                <div>
                    <button onclick="closeDetails()" class="float-right text-gray-400 hover:text-gray-600">✕</button>
                    <h2 id="detailTitle" class="text-3xl font-bold text-brandBlue mb-4"></h2>
                    <div class="w-16 h-1 bg-brandGold mb-6"></div>
                    <p id="detailDesc" class="text-gray-600 leading-relaxed overflow-y-auto max-h-[30vh]"></p>
                </div>
                <div class="mt-8">
                    <button class="w-full bg-brandBlue text-white py-3 rounded-xl font-bold border border-brandGold hover:bg-opacity-90 transition-all">Enquire Now</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyA_oTePhmWmzuOcZDmc_-7bhoAVbYVhH3Q",
            authDomain: "houseofglass-440.firebaseapp.com",
            projectId: "houseofglass-440",
            storageBucket: "houseofglass-440.firebasestorage.app",
            messagingSenderId: "73082039144",
            appId: "1:73082039144:web:0658e54416293334dc84dd",
            measurementId: "G-S81YY4Z4RM"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        let products = [];
        let categories = ['All'];
        let activeCategory = 'All';

        const grid = document.getElementById('product-grid');
        const modal = document.getElementById('detailModal');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');

        async function loadData() {
            try {
                // Load Categories
                const catSnapshot = await getDocs(collection(db, "categories"));
                const fetchedCats = catSnapshot.docs.map(doc => doc.data().name);
                categories = ['All', ...fetchedCats];
                
                // Load Products
                const prodSnapshot = await getDocs(query(collection(db, "products"), orderBy("createdAt", "desc")));
                products = prodSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

                renderCategories();
                renderProducts();
            } catch (error) {
                console.error("Error loading data:", error);
            }
        }

        window.toggleSidebar = function() {
            const isOpen = !sidebar.classList.contains('-translate-x-full');
            if (isOpen) {
                sidebar.classList.add('-translate-x-full');
                sidebarOverlay.classList.add('opacity-0', 'pointer-events-none');
            } else {
                sidebar.classList.remove('-translate-x-full');
                sidebarOverlay.classList.remove('opacity-0', 'pointer-events-none');
            }
        }

        function renderCategories() {
            const catList = document.getElementById('categoryList');
            catList.innerHTML = '';
            categories.forEach(cat => {
                const btn = document.createElement('button');
                btn.className = `w-full text-left px-8 py-4 text-lg font-medium transition-all hover:bg-gray-50 flex items-center ${activeCategory === cat ? 'text-brandGold border-r-4 border-brandGold bg-gray-50' : 'text-gray-600'}`;
                btn.innerHTML = `${cat}`;
                btn.onclick = () => {
                    activeCategory = cat;
                    renderProducts();
                    renderCategories();
                    window.toggleSidebar();
                };
                catList.appendChild(btn);
            });
        }

        function renderProducts() {
            grid.innerHTML = '';
            const filteredProducts = activeCategory === 'All' 
                ? products 
                : products.filter(p => p.category === activeCategory);

            if (filteredProducts.length === 0) {
                grid.innerHTML = `<div class="col-span-full py-20 text-center text-gray-400 font-arabic">لا يوجد منتجات في هذا القسم حالياً</div>`;
                return;
            }

            filteredProducts.forEach(p => {
                const card = document.createElement('div');
                card.className = 'cursor-pointer group bg-white rounded-2xl shadow-sm hover:shadow-xl overflow-hidden transition-all duration-500 border border-gray-100';
                card.onclick = () => showDetails(p.id);
                card.innerHTML = `
                    <div class="overflow-hidden h-64 relative bg-gray-50 flex items-center justify-center">
                        <img src="${p.images[0] || 'https://via.placeholder.com/400x300'}" class="w-full h-full object-contain p-2 group-hover:scale-105 transition-transform duration-700">
                        <div class="absolute top-2 left-2 bg-brandBlue/10 text-brandBlue text-[10px] px-2 py-1 rounded font-bold uppercase tracking-wider">${p.category}</div>
                        <div class="absolute bottom-2 right-2 bg-black/40 text-white text-[10px] px-2 py-1 rounded-full backdrop-blur-sm">${p.images.length} Photos</div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-lg font-bold text-brandBlue">${p.name}</h3>
                        <p class="text-gray-400 text-xs mt-1 italic">Click to view details</p>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        window.showDetails = function(id) {
            const p = products.find(prod => prod.id === id);
            if (!p) return;

            document.getElementById('detailTitle').innerText = p.name;
            document.getElementById('detailDesc').innerText = p.desc;
            document.getElementById('mainDetailImg').src = p.images[0];

            const thumbBar = document.getElementById('thumbnailBar');
            thumbBar.innerHTML = '';
            p.images.forEach((img, idx) => {
                const t = document.createElement('img');
                t.src = img;
                t.className = `h-20 w-20 object-cover rounded cursor-pointer border-2 transition-all ${idx === 0 ? 'border-brandGold' : 'border-transparent hover:border-brandBlue'}`;
                t.onclick = (e) => {
                    document.getElementById('mainDetailImg').src = img;
                    Array.from(thumbBar.children).forEach(child => child.classList.remove('border-brandGold'));
                    t.classList.add('border-brandGold');
                };
                thumbBar.appendChild(t);
            });

            modal.classList.remove('opacity-0', 'pointer-events-none');
            document.body.classList.add('modal-active');
        }

        window.closeDetails = function() {
            modal.classList.add('opacity-0', 'pointer-events-none');
            document.body.classList.remove('modal-active');
        }

        loadData();
    </script>
</body>
</html>
