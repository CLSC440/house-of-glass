# دليل الربط التقني (Gallery <-> HG System)

يا بشمهندس، الملف ده فيه كل التفاصيل اللي محتاجها عشان تربط الـ **Gallery Website** مع الـ **HG System (DC)**.

الربط قايم على فكرة إننا بنستخدم **Code المنتج** كلغة مشتركة بين السيستمين.

---

## 1. إزاي تاخد الصور من عندنا؟ (Gallery as Media Provider)

إحنا عملنا API Endpoint مخصوص ليك، تقدر تنده عليه بـ Product Code وهو هيرد عليك بكل بيانات الصور (Main Image + Variants).

### الرابط (Endpoint):
```http
GET https://YOUR-GALLERY-DOMAIN.vercel.app/api/media?code=PRODUCT_CODE
```
*(طبعاً هتحط الدومين الفعلي للموقع مكان `YOUR-GALLERY-DOMAIN`)*

### شكل الـ Response:
```json
{
  "code": "CUP-101",
  "name": "طقم كاسات كريستال",
  "images": [
    "https://res.cloudinary.com/.../image1.jpg",
    "https://res.cloudinary.com/.../image2.jpg"
  ],
  "variants": [
    {
      "name": "أحمر",
      "images": ["https://res.cloudinary.com/.../red-cup.jpg"]
    }
  ]
}
```

### إيه المطلوب منك في الـ HG System؟
في شاشة "كارت الصنف" أو الـ "Sales Invoice" عندك، لما الموظف يختار صنف، السيستم بتاعك ياخد الكود بتاعه ويبعت Request للرابط ده، ويعرض الصور اللي راجعة في الـ Response.

---

## 2. إزاي تبعت لنا الأسعار؟ (DC as Price Provider)

إحنا محتاجين منك API Endpoint عندك في الـ DC عشان الويب سايت يكلمه ويجيب منه الأسعار الحالية والمخزون.

### المطلوب منك تعمله:
اعملنا Endpoint بياخد Array of Codes ويرد بالأسعار.

**المقترح (Request Body):**
```json
{
  "codes": ["CUP-101", "PLATE-505", "VASE-99"]
}
```

**المقترح (Response Body):**
```json
{
  "CUP-101": { "price": 1500, "stock": 5 },
  "PLATE-505": { "price": 400, "stock": 20 },
  "VASE-99": { "price": 0, "stock": 0 }
}
```

### ليه Bulk Request؟
عشان الصفحة الرئيسية عندنا ممكن يكون فيها 20 أو 50 منتج، فبدل ما نبعتلك 50 Request، بنبعتلك Request واحد فيه كل الأكواد المطلوبة.

---

## 3. ملاحظات هامة للتهيئة (Configuration)

### أ. Firebase Access (لو حبيت تقرأ داتا مباشرة)
لو السيستم بتاعك (HG System) مبني بـ Node.js أو بيقدر يكلم Firebase، إحنا ممكن نديك `serviceAccountKey.json` عشان تقدر تدخل على كولكشن `products` وتعمل Sync براحتك لو مش عايز تستخدم الـ API اللي فوق.

### ب. صور Cloudinary
كل الصور اللي راجعالك عبارة عن لينكات `https` عادية ومباشرة. مش محتاج أي Authentication عشان تعرضها عندك في الـ Image View.

### ج. توحيد الأكواد
إحنا ظبطنا عندنا في لوحة التحكم (Admin Dashboard) إن حقل الـ Code إجباري (Mandatory) وممنوع التكرار (Unique).
**يا ريت تتأكد إن الأكواد اللي بيتم تكويدها في الـ DC هي هي اللي بتتبعت للـ Gallery (بالظبط الحروف Capital/Small) عشان الربط يشتغل صح.**

---

لو في أي استفسار في الـ Payload أو طريقة الربط، بلغنا فوراً.
بالتوفيق!
